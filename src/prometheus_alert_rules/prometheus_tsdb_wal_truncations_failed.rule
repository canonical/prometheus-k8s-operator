# Based on https://awesome-prometheus-alerts.grep.to/rules.html#prometheus-self-monitoring-1
alert: PrometheusTsdbWalTruncationsFailed
expr: increase(prometheus_tsdb_wal_truncations_failed_total{%%juju_topology%%}[1m]) > 0
for: 0m
labels:
  severity: critical
annotations:
  summary: Prometheus TSDB WAL truncations failed (instance {{ $labels.instance }})
  description: "Prometheus encountered {{ $value }} TSDB WAL truncation failures\n  VALUE = {{ $value }}\n  LABELS = {{ $labels }}"
